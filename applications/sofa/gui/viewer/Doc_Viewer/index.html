<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
	<HEAD>
		<TITLE></TITLE>
		<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
		<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.2  (Win32)">
		<META NAME="CREATED" CONTENT="20070601;16074300">
		<META NAME="CHANGEDBY" CONTENT="EVASION INRIA">
		<META NAME="CHANGED" CONTENT="20070619;11234335">
	</HEAD>
	<BODY LANG="en-US" DIR="ltr">
		<P ALIGN="left" STYLE="MARGIN-BOTTOM: 0cm"><FONT SIZE="4"><B>The Graphic User Interface in 
					SOFA</B></FONT></P>
		<P STYLE="MARGIN-TOP: 0.43cm"><FONT FACE="Albany, sans-serif"><FONT SIZE="4"><A HREF="#Overview">I) 
						An overview of the GUI</A><BR>
					<A HREF="#Structure">II) Structure</A><BR>
					<A HREF="#Viewers">III) Viewers</A><BR>
					<A HREF="#QtOgreViewer">IV) QtOgreViewer</A><BR>
				</FONT></FONT>
			<BR>
			<BR>
		</P>
		<HR>
		<P><BR>
			<BR>
		</P>
		<OL TYPE="I">
			<LI>
				<P STYLE="MARGIN-TOP: 0.43cm"><FONT FACE="Albany, sans-serif"><FONT SIZE="4"><A NAME="Overview">An Overview of 
							the GUI</A><BR>
							<FONT FACE="Albany, sans-serif"><FONT SIZE="4">
									<BR>
								</FONT></FONT><FONT FACE="Times New Roman, serif"><FONT SIZE="3">The main program 
									is divided in two main parts, a rendering window and a control panel. A slider 
									between them sets their dimension.</FONT></FONT></FONT></FONT></P>
			</LI>
		</OL>
		<OL TYPE="I">
			<P STYLE="MARGIN-BOTTOM: 0cm"><IMG SRC="index_fichiers/GUI_caption0.png" NAME="graphics3" ALIGN="left" BORDER="0"><BR CLEAR="left">
				<FONT FACE="Nimbus Roman No9 L, serif">
					<BR>
					Common Interactions:</FONT></P>
		<OL>
			<LI VALUE="1">
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>ANIM</B>: 
						launch the Simulation. The text field, <B>DT</B>sets the step of time used 
						during the simulation.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>STEP</B>: the 
						simulation will compute its state at the time: t+DT. </FONT>
				</P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>Reset Scene</B>: 
						reset the Simulation to the initial time, t=0.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>Reset View</B>: 
						set your camera at initial configuration found in a view file, or default 
						configuration.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>Save View:</B> keep 
						in memory the position and orientation of the camera, for the next time you 
						will load the scene.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><B>Save Screenshot</B>: 
						take a picture of the current scene.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">Direct interaction 
						with the scene is possible. To do so, maintain SHIFT button pressed and click 
						on a collision model present in the scene; A “Pick Interactor” will be created, 
						and attached to the picked collision model, if any, with a spring. </FONT>
				</P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">If you release the 
						mouse button first, the spring is removed.</FONT></P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">If you release the 
						SHIFT button first, the spring is fixed and exists until you pick another point 
						in the scene.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">Several tabs give 
						more information about the current scene:
						<BR>
						This images were taken for the scene shown above.</FONT></P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><IMG SRC="index_fichiers/Tab_show.png" NAME="graphics6" ALIGN="left" BORDER="0"><IMG SRC="index_fichiers/Tab_stats.png" NAME="graphics00" ALIGN="left" BORDER="0"><IMG SRC="index_fichiers/Tab_graph.png" NAME="graphics7" ALIGN="left" BORDER="0"><FONT FACE="Nimbus Roman No9 L, serif"><FONT FACE="Nimbus Roman No9 L, serif"><BR>
						</FONT><FONT FACE="Nimbus Roman No9 L, serif">
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
							<BR>
						</FONT></FONT>
					<BR>
				</P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif"><BR>
						<BR>
						<BR>
						- depending on the viewer, you can control what is displayed, and the way it 
						is.
						<BR>
						- statistical outputs during the simulation (position and velocity for each 
						elements, time passed at each branch of the graph, gnuplot files)
						<BR>
						- the graph of the scene, with all the nodes. You can export this graph into a 
						nice png file.<BR>
						- the last tab, “</FONT><FONT face="Nimbus Roman No9 L, serif"><B>Viewer</B></FONT>”
					<FONT face="Nimbus Roman No9 L, serif">gives the name and information about the 
						possibilities of the current viewer, and the shortcuts.</FONT><BR>
					<BR>
					Double clicking on a node allows you to modify several values and change 
					dynamically the simulation (here, the TetrahedronFEMForceField node)</FONT></P>
				<P><IMG SRC="index_fichiers/GUI_caption1.png" NAME="graphics5" ALIGN="left" BORDER="0"><BR CLEAR="left">
				</P>
			</LI>
		</OL>
		</OL>
		<OL type="I" start="2">
			<LI>
				<P STYLE="MARGIN-TOP: 0.43cm"><FONT FACE="Albany, sans-serif"><FONT SIZE="4"><A NAME="Structure">Structure</A> <BR>
						</FONT><FONT face="Times New Roman" size="3">The main interface uses a Qt 
							environment (Qt3.3 for Linux and Qt4 for Windows). The Main window, providing 
							all the interactions possible with the simulation,was created using QtDesigner. 
							The RealGUI contains the viewer which can be selected directly in the main 
							window. The possible choices depends on the configuration file, <CODE>sofa-default.cfg</CODE>.</P>
		<OL type="I">
			<P style="MARGIN-BOTTOM: 0cm"><IMG src="index_fichiers/GUI.png" align="left" border="0" name="graphics1"><BR clear="left">
				The RealGUI gets a pointer to the root of the scene graph, and controls the 
				application by calling class <CODE>sofa::simulation::tree:Simulation</CODE>.
			</P>
			<P style="MARGIN-BOTTOM: 0cm"><FONT face="Times New Roman, serif"><FONT size="3">The 
						RealGUI uses an internal timer to repeatedly call method</FONT></FONT> <CODE>
					<FONT face="Courier New, monospace"><FONT size="3">sofa::simulation::tree:Simulation::animate(GNode* 
							root, double dt)</FONT></FONT></CODE> <FONT face="Times New Roman, serif">
					<FONT size="3">and then update the viewer.</FONT></FONT></P>
			<P style="MARGIN-BOTTOM: 0cm"><FONT face="Albany, sans-serif"><FONT size="4"><BR>
						<FONT face="Times New Roman, serif"><FONT size="3">To select the viewers:</FONT></FONT></FONT></FONT></P>
		</OL>
		<OL type="I" start="2">
			<P><FONT face="Nimbus Roman No9 L, serif">sofa-default.cfg located in your Sofa main 
					directory allows to define what kind of viewer you are willing to have.
					<BR>
					By commenting (adding a“#” in front of the line) or uncommenting (removing the 
					“#”) lines, you can allow multiple kind of viewer.<BR>
					For example, if you want to have the choice to render the scene with QtGLViewer 
					and QtOgreViewer, just modify sofa-default.cfg as below:<BR>
					<BR>
					<FONT face="Courier New, monospace"># DEFINES += SOFA_GUI_QT
						<BR>
						DEFINES += SOFA_GUI_QTOGREVIEWER<BR>
						DEFINES += SOFA_GUI_QGLVIEWER</FONT><FONT face="Courier, monospace"><BR>
						<BR>
					</FONT>Then, in the main window, you select the kind of viewer you want. Qt 
					will appear in gray, whereas QGLViewer and Ogre will be available.<BR>
					Warning, you must reload the scene when this change is made!</FONT></P>
			</FONT></FONT><FONT face="Arial" size="4"><BR>
			</FONT>
		</OL>
		<LI>
			<P style="MARGIN-TOP: 0.43cm">
				<FONT FACE="Albany, sans-serif"><FONT SIZE="4"><A NAME="Viewers">Viewers</A> </FONT></FONT></P>
		</LI>
		</OL>
		<OL TYPE="I">
			<P STYLE="MARGIN-BOTTOM: 0cm"><IMG SRC="index_fichiers/Viewer.png" NAME="graphics2" ALIGN="left" BORDER="0"><BR CLEAR="left">
				<FONT FACE="Nimbus Roman No9 L, serif">
					<BR>
					The Viewers available now are:</FONT></P>
		<OL>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">QtViewer: uses 
						openGL, derives a QGLWidget in order to be embedded within Qt. This class will 
						probably not be maintained. Use QtGLViewer instead.</FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">QtGLViewer: uses 
						the library QGLViewer. Provides lots of functions to navigate through the 
						scene.<BR>
						More information at <A HREF="http://artis.imag.fr/%7EGilles.Debunne/QGLViewer/download.html">
							QGLViewer Website.</A></FONT></P>
			<LI>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">QtOgreViewer: 
						Embed Ogre within a Qwidget. Allows to get great visuals, through an intensive 
						use of shaders, materials.<BR>
						Shadows are provided, but all the controls (show the mechanical objects, force 
						fields...) are disabled.
						<BR>
						Warning: Ogre is not provided by Sofa, you have to previously install Ogre on 
						your computer.
						<BR>
						The support works with Windows, Linux.
						<BR>
						- For Windows, the easiest way to proceed is to download and install the SDK.
						<BR>
						- For Linux, you have to compile from the source. If Ogre's library aren't 
						installed in the default directory “</FONT><FONT FACE="Nimbus Roman No9 L, serif"><B>/usr/local/lib/Ogre</B></FONT>”
					<FONT FACE="Nimbus Roman No9 L, serif">then, you have to set the correct path in “</FONT><FONT FACE="Nimbus Roman No9 L, serif"><B>YourSofaDirectory/share/config/plugins_unix.cfg</B></FONT>”<FONT FACE="Nimbus Roman No9 L, serif"><BR>
						To get it: <A HREF="http://www.ogre3d.org/index.php?option=com_content&amp;task=view&amp;id=406&amp;Itemid=103">
							Ogre Website</A></FONT></P>
			</LI>
		</OL>
		</OL>
		<OL TYPE="I" START="4">
			<LI>
				<P STYLE="MARGIN-TOP: 0.43cm"><A NAME="QtOgreViewer"></A> <FONT FACE="Albany, sans-serif">
						<FONT SIZE="4">QtOgreViewer</FONT></FONT></P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">To use this 
						viewer, you must have Ogre installed on your computer.
						<BR>
						The configuration files are located in: “</FONT><FONT FACE="Nimbus Roman No9 L, serif"><B>YourSofaDirectory/share/config/</B></FONT>”<FONT FACE="Nimbus Roman No9 L, serif">.
					</FONT>“<FONT FACE="Nimbus Roman No9 L, serif"><B>plugins.cfg</B></FONT>” <FONT FACE="Nimbus Roman No9 L, serif">
						describes the plugins used by Ogre for Windows, and “</FONT><FONT FACE="Nimbus Roman No9 L, serif"><B>plugins_unix.cfg</B></FONT>”
					<FONT FACE="Nimbus Roman No9 L, serif">for... Linux.<BR>
						By creating a .scene file with the same name as the simulation, you can provide 
						additional models, lights, visuals to the simulation( see Ogre documentation 
						for mode details ). This won't interact with Sofa, but allows you to get a 
						better render.</FONT></P>
				<P STYLE="MARGIN-BOTTOM: 0cm"><FONT FACE="Nimbus Roman No9 L, serif">Additional 
						textures, materials, shaders... in Ogre, have to be put in “ <B>YourSofaDirectory/share/textures</B>” 
						or “ <B>YourSofaDirectory/share/materials</B>” or “<B>YourSofaDirectory/share/shaders</B>” 
						... They are loaded at the start-up of the viewer.</FONT></P>
				<P STYLE="MARGIN-TOP: 0.43cm"><IMG SRC="index_fichiers/VIewerOGRE.png" NAME="graphics4" ALIGN="left" BORDER="0"><BR CLEAR="left">
					<FONT FACE="Nimbus Roman No9 L, serif"><FONT SIZE="4">
							<BR>
						</FONT></FONT>
					<BR>
					<BR>
				</P>
			</LI>
		</OL>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
		<P STYLE="MARGIN-BOTTOM: 0cm"><BR>
		</P>
	</BODY>
</HTML>
